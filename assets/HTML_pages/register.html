<!DOCTYPE html>
<html lang="en">
<head>
  <title>Register Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('bg2.png');
      background-repeat: no-repeat;
      background-size: cover;
    }
    form {
      background-color: #ffffff;
      border: 3px solid #f1f1f1;
      border-radius: 7px;
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
      position: relative;
      margin-top: 220px;
    }
    input[type=text], input[type=password] {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button {
      background-color: #e0b973;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.7s ease-in-out;
    }
    button:hover {
      background-color: #ffa908;
    }
    .container {
      padding: 16px;
    }
    span.psw {
      float: right;
      padding-top: 16px;
    }
  </style>
</head>
<body>

<form method="post" action="../../register.php">
  <div class="container">
    <label for="username"><b>Username</b></label>
    <input type="text" placeholder="Enter Username" name="username" id="username" required>

    <label for="email"><b>Email</b></label>
    <input type="text" placeholder="Enter Email" name="email" id="email" required>

    <label for="password"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" name="password" id="password" required>

    <label for="Rpassword"><b>Repeat Password</b></label>
    <input type="password" placeholder="Repeat Password" name="Rpassword" id="Rpassword" required>

    <button type="submit" id="registerBtn">Register</button>
  </div>

  <div class="container" style="background-color:#f1f1f1">
    <a href="../../index.html"><button type="button" class="cancelbtn">Cancel</button></a>

  </div>
</form>
<script>
  const registerBtn = document.getElementById("registerBtn");
  registerBtn.addEventListener("click", function(event) {
    event.preventDefault();

    const username = document.getElementById("username").value;
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const Rpassword = document.getElementById("Rpassword").value;

    if (username === "" || email === "" || password === "" || Rpassword === "") {
      alert("Please fill out all fields.");
    } else if (!validateUsername(username)) {
      alert("Username must contain only letters and numbers, and be between 4 and 20 characters long.");
    } else if (!validateEmail(email)) {
      alert("Please enter a valid email address.");
    } else if (!validatePassword(password)) {
      alert("Password must contain at least one uppercase letter, one lowercase letter, one digit, and be at least 8 characters long.");
    } else if (Rpassword !== password) {
      alert("Passwords do not match. Please try again.");
    } else {
      alert("Registration successful!");
      window.location.href = "index.html";
    }
  });

  function validateUsername(username) {
    const regex = /^[a-zA-Z0-9]{4,20}$/;
    return regex.test(username);
  }

  function validateEmail(email) {
    const regex = /\S+@\S+\.\S+/;
    return regex.test(email);
  }

  function validatePassword(password) {
    const regex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/;
    return regex.test(password);
  }

</script>
</body>
</html>